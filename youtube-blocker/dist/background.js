(()=>{var e,o;function t(){chrome.storage.sync.get(["businessHours"],(function(e){if(e.businessHours){var o=function(e){var o,t=new Date,n=t.toLocaleDateString("en-US",{weekday:"long"}),r=t.toLocaleTimeString("en-US",{hour12:!1});if(null===(o=e[n])||void 0===o||!o.enabled)return!1;var c=e[n].start,a=e[n].end;return r>=c&&r<=a}(e.businessHours);chrome.storage.local.set({isBlocking:o})}}))}chrome.runtime.onInstalled.addListener((function(){chrome.storage.local.set({blockedCount:0})})),chrome.alarms.create("resetBlockedCount",{when:(e=new Date,o=new Date(e),o.setHours(24,0,0,0),o.getTime()),periodInMinutes:1440}),chrome.alarms.create("checkBlockingStatus",{periodInMinutes:1}),chrome.alarms.onAlarm.addListener((function(e){"resetBlockedCount"===e.name?chrome.storage.local.set({blockedCount:0}):"checkBlockingStatus"===e.name&&t()})),chrome.runtime.onMessage.addListener((function(e,o,n){"VIDEO_BLOCKED"===e.type?(chrome.storage.local.get(["blockedCount"],(function(e){var o=(e.blockedCount||0)+1;chrome.storage.local.set({blockedCount:o})})),chrome.notifications.create({type:"basic",iconUrl:"icons/icon128.png",title:"Video Blocked",message:'"'.concat(e.videoTitle,'" was blocked during work hours.')})):"CHECK_BLOCKING_STATUS"===e.type&&(t(),n({}))})),t()})();